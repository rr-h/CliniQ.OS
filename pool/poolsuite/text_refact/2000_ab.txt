remove firebase code from this and fix the code. NO NEED TO EXPLAIN OR TO SHOW A BEFORE. JUST DIRECTLY CARRY OUT THE TASK TO REMOVE FIREBASE ELEMENTS FROM THE GIVEN SNIPPET WITHOUT BREAKING THE PROJECT-
            this.task.then(() => {
              (this.observers = void 0), (this.onNoObservers = void 0);
            }));
        }
      }
      function W(e, t) {
        if ('object' !== typeof e || null === e) return !1;
        for (const n of t) if (n in e && 'function' === typeof e[n]) return !0;
        return !1;
      }
      function H() {}
      /**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
      /**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
      const K = 1e3,
        Q = 2,
        Y = 144e5,
        X = 0.5;
      function J(e, t = K, n = Q) {
        const r = t * Math.pow(n, e),
          i = Math.round(X * r * (Math.random() - 0.5) * 2);
        return Math.min(Y, r + i);
      }
      /**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
      /**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
      function Z(e) {
        return e && e._delegate ? e._delegate : e;
      }
    },
    1001: (e, t, n) => {
      'use strict';
      function r(e, t, n, r, i, o, s, a) {
        var u,
          c = 'function' === typeof e ? e.options : e;
        if (
          (t && ((c.render = t), (c.staticRenderFns = n), (c._compiled = !0)),
          r && (c.functional = !0),
          o && (c._scopeId = 'data-v-' + o),
          s
            ? ((u = function (e) {
                (e = e || (this.$vnode && this.$vnode.ssrContext) || (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext)),
                  e || 'undefined' === typeof __VUE_SSR_CONTEXT__ || (e = __VUE_SSR_CONTEXT__),
                  i && i.call(this, e),
                  e && e._registeredComponents && e._registeredComponents.add(s);
              }),
              (c._ssrRegister = u))
            : i &&
              (u = a
                ? function () {
                    i.call(this, (c.functional ? this.parent : this).$root.$options.shadowRoot);
                  }
                : i),
          u)
        )
          if (c.functional) {
            c._injectStyles = u;
            var l = c.render;
            c.render = function (e, t) {
              return u.call(t), l(e, t);
            };
          } else {
            var h = c.beforeCreate;
            c.beforeCreate = h ? [].concat(h, u) : [u];
          }
        return { exports: e, options: c };
      }
      n.d(t, { Z: () => r });
    },
    64429: (e, t, n) => {
      'use strict';
      n.d(t, { Z: () => ln });
      var r = {};
      function i() {
        return 'object' === typeof window && void 0 !== (null === window || void 0 === window ? void 0 : window.document);
      }
      n.r(r),
        n.d(r, { exclude: () => L, extract: () => k, parse: () => O, parseUrl: () => R, pick: () => D, stringify: () => N, stringifyUrl: () => P });
      var o = function () {
          var e;
          if (i()) {
            var t = window,
              n = Array;
            if (void 0 !== t.Prototype && void 0 !== (null === (e = n.prototype) || void 0 === e ? void 0 : e.toJSON))
              return delete n.prototype.toJSON, !0;
          }
          return !1;
        },
        s = n(99560),
        a = n.n(s);
      const u = '%[a-f0-9]{2}',
        c = new RegExp('(' + u + ')|([^%]+?)', 'gi'),
        l = new RegExp('(' + u + ')+', 'gi');
      function h(e, t) {
        try {
          return [decodeURIComponent(e.join(''))];
        } catch {}
        if (1 === e.length) return e;
        t = t || 1;
        const n = e.slice(0, t),
          r = e.slice(t);
        return Array.prototype.concat.call([], h(n), h(r));
      }
      function f(e) {
        try {
          return decodeURIComponent(e);
        } catch {
          let t = e.match(c) || [];
          for (let n = 1; n < t.length; n++) (e = h(t, n).join('')), (t = e.match(c) || []);
          return e;
        }
      }
      function d(e) {
        const t = { '%FE%FF': '��', '%FF%FE': '��' };
        let n = l.exec(e);
        while (n) {
          try {
            t[n[0]] = decodeURIComponent(n[0]);
          } catch {
            const e = f(n[0]);
            e !== n[0] && (t[n[0]] = e);
          }
          n = l.exec(e);
        }
        t['%C2'] = '�';
        const r = Object.keys(t);
        for (const i of r) e = e.replace(new RegExp(i, 'g'), t[i]);
        return e;
      }
      function p(e) {
        if ('string' !== typeof e) throw new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof e + '`');
        try {
          return decodeURIComponent(e);
        } catch {
          return d(e);
        }
      }
      function g(e, t) {
        if ('string' !== typeof e || 'string' !== typeof t) throw new TypeError('Expected the arguments to be of type `string`');
        if ('' === e || '' === t) return [];
        const n = e.indexOf(t);
        return -1 === n ? [] : [e.slice(0, n), e.slice(n + t.length)];
      }
      function m(e, t) {
        const n = {};
        if (Array.isArray(t))
          for (const r of t) {
            const t = Object.getOwnPropertyDescriptor(e, r);
            t?.enumerable && Object.defineProperty(n, r, t);
          }
        else
          for (const r of Reflect.ownKeys(e)) {
            const i = Object.getOwnPropertyDescriptor(e, r);
            if (i.enumerable) {
              const o = e[r];
              t(r, o, e) && Object.defineProperty(n, r, i);
            }
          }
        return n;
      }
      const v = e => null === e || void 0 === e,
        y = e => encodeURIComponent(e).replace(/[!'()*]/g, e => `%${e.charCodeAt(0).toString(16).toUpperCase()}`),
        w = Symbol('encodeFragmentIdentifier');
      function b(e) {
        switch (e.arrayFormat) {
          case 'index':
            return t => (n, r) => {
              const i = n.length;
              return void 0 === r || (e.skipNull && null === r) || (e.skipEmptyString && '' === r)
                ? n
                : null === r
                  ? [...n, [E(t, e), '[', i, ']'].join('')]
                  : [...n, [E(t, e), '[', E(i, e), ']=', E(r, e)].join('')];
            };
          case 'bracket':
            return t => (n, r) =>
              void 0 === r || (e.skipNull && null === r) || (e.skipEmptyString && '' === r)
                ? n
                : null === r
                  ? [...n, [E(t, e), '[]'].join('')]
                  : [...n, [E(t, e), '[]=', E(r, e)].join('')];
          case 'colon-list-separator':
            return t => (n, r) =>
              void 0 === r || (e.skipNull && null === r) || (e.skipEmptyString && '' === r)
                ? n
                : null === r
                  ? [...n, [E(t, e), ':list='].join('')]
                  : [...n, [E(t, e), ':list=', E(r, e)].join('')];
          case 'comma':
          case 'separator':
          case 'bracket-separator': {
            const t = 'bracket-separator' === e.arrayFormat ? '[]=' : '=';
            return n => (r, i) =>
              void 0 === i || (e.skipNull && null === i) || (e.skipEmptyString && '' === i)
                ? r
                : ((i = null === i ? '' : i), 0 === r.length ? [[E(n, e), t, E(i, e)].join('')] : [[r, E(i, e)].join(e.arrayFormatSeparator)]);
          }
          default:
            return t => (n, r) =>
              void 0 === r || (e.skipNull && null === r) || (e.skipEmptyString && '' === r)
                ? n
                : null === r
                  ? [...n, E(t, e)]
                  : [...n, [E(t, e), '=', E(r, e)].join('')];
        }
      }
      function _(e) {
        let t;
        switch (e.arrayFormat) {
          case 'index':
            return (e, n, r) => {
              (t = /\[(\d*)]$/.exec(e)), (e = e.replace(/\[\d*]$/, '')), t ? (void 0 === r[e] && (r[e] = {}), (r[e][t[1]] = n)) : (r[e] = n);
            };
          case 'bracket':
            return (e, n, r) => {
              (t = /(\[])$/.exec(e)), (e = e.replace(/\[]$/, '')), t ? (void 0 !== r[e] ? (r[e] = [...r[e], n]) : (r[e] = [n])) : (r[e] = n);
            };
          case 'colon-list-separator':
            return (e, n, r) => {
              (t = /(:list)$/.exec(e)), (e = e.replace(/:list$/, '')), t ? (void 0 !== r[e] ? (r[e] = [...r[e], n]) : (r[e] = [n])) : (r[e] = n);
            };
          case 'comma':
          case 'separator':
            return (t, n, r) => {
              const i = 'string' === typeof n && n.includes(e.arrayFormatSeparator),
                o = 'string' === typeof n && !i && S(n, e).includes(e.arrayFormatSeparator);
              n = o ? S(n, e) : n;
              const s = i || o ? n.split(e.arrayFormatSeparator).map(t => S(t, e)) : null === n ? n : S(n, e);
              r[t] = s;
            };
          case 'bracket-separator':
            return (t, n, r) => {
              const i = /(\[])$/.test(t);
              if (((t = t.replace(/\[]$/, '')), !i)) return void (r[t] = n ? S(n, e) : n);
              const o = null === n ? [] : n.split(e.arrayFormatSeparator).map(t => S(t, e));
              void 0 !== r[t] ? (r[t] = [...r[t], ...o]) : (r[t] = o);
            };
          default:
            return (e, t, n) => {
              void 0 !== n[e] ? (n[e] = [...[n[e]].flat(), t]) : (n[e] = t);
            };
        }
      }
      function I(e) {
        if ('string' !== typeof e || 1 !== e.length) throw new TypeError('arrayFormatSeparator must be single character string');
      }
      function E(e, t) {
        return t.encode ? (t.strict ? y(e) : encodeURIComponent(e)) : e;
      }
      function S(e, t) {
        return t.decode ? p(e) : e;
      }
      function T(e) {
        return Array.isArray(e)
          ? e.sort()
          : 'object' === typeof e
            ? T(Object.keys(e))
                .sort((e, t) => Number(e) - Number(t))
                .map(t => e[t])
            : e;
      }
      function A(e) {
        const t = e.indexOf('#');
        return -1 !== t && (e = e.slice(0, t)), e;
      }
      function x(e) {
        let t = '';
        const n = e.indexOf('#');
        return -1 !== n && (t = e.slice(n)), t;
      }
      function C(e, t) {
        return (
          t.parseNumbers && !Number.isNaN(Number(e)) && 'string' === typeof e && '' !== e.trim()
            ? (e = Number(e))
            : !t.parseBooleans || null === e || ('true' !== e.toLowerCase() && 'false' !== e.toLowerCase()) || (e = 'true' === e.toLowerCase()),
          e
        );
      }
      function k(e) {
        e = A(e);
        const t = e.indexOf('?');
        return -1 === t ? '' : e.slice(t + 1);
      }
      function O(e, t) {
        (t = { decode: !0, sort: !0, arrayFormat: 'none', arrayFormatSeparator: ',', parseNumbers: !1, parseBooleans: !1, ...t }),
          I(t.arrayFormatSeparator);
        const n = _(t),
          r = Object.create(null);
        if ('string' !== typeof e) return r;
        if (((e = e.trim().replace(/^[?#&]/, '')), !e)) return r;
        for (const i of e.split('&')) {
          if ('' === i) continue;
          const e = t.decode ? i.replace(/\+/g, ' ') : i;
          let [o, s] = g(e, '=');
          void 0 === o && (o = e),
            (s = void 0 === s ? null : ['comma', 'separator', 'bracket-separator'].includes(t.arrayFormat) ? s : S(s, t)),
            n(S(o, t), s, r);
        }
        for (const [i, o] of Object.entries(r))
          if ('object' === typeof o && null !== o) for (const [e, n] of Object.entries(o)) o[e] = C(n, t);
          else r[i] = C(o, t);
        return !1 === t.sort
          ? r
          : (!0 === t.sort ? Object.keys(r).sort() : Object.keys(r).sort(t.sort)).reduce((e, t) => {
              const n = r[t];
              return Boolean(n) && 'object' === typeof n && !Array.isArray(n) ? (e[t] = T(n)) : (e[t] = n), e;
            }, Object.create(null));
      }
      function N(e, t) {
        if (!e) return '';
        (t = { encode: !0, strict: !0, arrayFormat: 'none', arrayFormatSeparator: ',', ...t }), I(t.arrayFormatSeparator);
        const n = n => (t.skipNull && v(e[n])) || (t.skipEmptyString && '' === e[n]),
          r = b(t),
          i = {};
        for (const [s, a] of Object.entries(e)) n(s) || (i[s] = a);
        const o = Object.keys(i);
        return (
          !1 !== t.sort && o.sort(t.sort),
          o
            .map(n => {
              const i = e[n];
              return void 0 === i
                ? ''
                : null === i
                  ? E(n, t)
                  : Array.isArray(i)
                    ? 0 === i.length && 'bracket-separator' === t.arrayFormat
                      ? E(n, t) + '[]'
                      : i.reduce(r(n), []).join('&')
                    : E(n, t) + '=' + E(i, t);
            })
            .filter(e => e.length > 0)
            .join('&')
        );
      }
      function R(e, t) {
        t = { decode: !0, ...t };
        let [n, r] = g(e, '#');
        return (
          void 0 === n && (n = e),
          { url: n?.split('?')?.[0] ?? '', query: O(k(e), t), ...(t && t.parseFragmentIdentifier && r ? { fragmentIdentifier: S(r, t) } : {}) }
        );
      }
      function P(e, t) {
        t = { encode: !0, strict: !0, [w]: !0, ...t };
        const n = A(e.url).split('?')[0] || '',
          r = k(e.url),
          i = { ...O(r, { sort: !1 }), ...e.query };
        let o = N(i, t);
        o && (o = `?${o}`);
        let s = x(e.url);
        if (e.fragmentIdentifier) {
          const r = new URL(n);
          (r.hash = e.fragmentIdentifier), (s = t[w] ? r.hash : `#${e.fragmentIdentifier}`);
        }
        return `${n}${o}${s}`;
      }
      function D(e, t, n) {
        n = { parseFragmentIdentifier: !0, [w]: !1, ...n };
        const { url: r, query: i, fragmentIdentifier: o } = R(e, n);
        return P({ url: r, query: m(i, t), fragmentIdentifier: o }, n);
      }
      function L(e, t, n) {
        const r = Array.isArray(t) ? e => !t.includes(e) : (e, n) => !t(e, n);
        return D(e, r, n);
      }
      var j = r,
        M = n(29293),
        F = n.n(M),
        U = (function () {
          function e() {}
          return (
            (e.prototype.getApplicationContext = function () {
              return { versionName: this.versionName, language: V(), platform: 'Web', os: void 0, deviceModel: void 0 };
            }),
            e
          );
        })(),
        V = function () {
          return ('undefined' !== typeof navigator && ((navigator.languages && navigator.languages[0]) || navigator.language)) || '';
        },
        B = (function () {
          function e() {
            this.queue = [];
          }
          return (
            (e.prototype.logEvent = function (e) {
              this.receiver ? this.receiver(e) : this.queue.length < 512 && this.queue.push(e);
            }),
            (e.prototype.setEventReceiver = function (e) {
              (this.receiver = e),
                this.queue.length > 0 &&
                  (this.queue.forEach(function (t) {
                    e(t);
                  }),
                  (this.queue = []));
            }),
            e
          );
        })(),
        $ = function () {
          return (
            ($ =
              Object.assign ||
              function (e) {
                for (var t, n = 1, r = arguments.length; n < r; n++)
                  for (var i in ((t = arguments[n]), t)) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
                return e;
              }),
            $.apply(this, arguments)
          );
        },
        q = function (e, t) {
          var n = ['string', 'number', 'boolean', 'undefined'],
            r = typeof e,
            i = typeof t;
          if (r !== i) return !1;
          for (var o = 0, s = n; o < s.length; o++) {
            var a = s[o];
            if (a === r) return e === t;
          }
          if (null == e && null == t) return !0;
          if (null == e || null == t) return !1;
          if (e.length !== t.length) return !1;
          var u = Array.isArray(e),
            c = Array.isArray(t);
          if (u !== c) return !1;
          if (!u || !c) {
            var l = Object.keys(e).sort(),
              h = Object.keys(t).sort();
            if (!q(l, h)) return !1;
            var f = !0;
            return (
              Object.keys(e).forEach(function (n) {
                q(e[n], t[n]) || (f = !1);
              }),
              f
            );
          }
          for (var d = 0; d < e.length; d++) if (!q(e[d], t[d])) return !1;
          return !0;
        },
        z = '$set',
        G = '$unset',
        W = '$clearAll';
      Object.entries ||
        (Object.entries = function (e) {
          var t = Object.keys(e),
            n = t.length,
            r = new Array(n);
          while (n--) r[n] = [t[n], e[t[n]]];
          return r;
        });
      var H = (function () {
          function e() {
            (this.identity = { userProperties: {} }), (this.listeners = new Set());
          }
          return (
            (e.prototype.editIdentity = function () {
              var e = this,
                t = $({}, this.identity.userProperties),
                n = $($({}, this.identity), { userProperties: t });
              return {
                setUserId: function (e) {
                  return (n.userId = e), this;
                },
                setDeviceId: function (e) {
                  return (n.deviceId = e), this;
                },
                setUserProperties: function (e) {
                  return (n.userProperties = e), this;
                },
                updateUserProperties: function (e) {
                  for (var t = n.userProperties || {}, r = 0, i = Object.entries(e); r < i.length; r++) {
                    var o = i[r],
                      s = o[0],
                      a = o[1];
                    switch (s) {
                      case z:
                        for (var u = 0, c = Object.entries(a); u < c.length; u++) {
                          var l = c[u],
                            h = l[0],
                            f = l[1];
                          t[h] = f;
                        }
                        break;
                      case G:
                        for (var d = 0, p = Object.keys(a); d < p.length; d++) {
                          h = p[d];
                          delete t[h];
                        }
                        break;
                      case W:
                        t = {};
                        break;
                    }
                  }
                  return (n.userProperties = t), this;
                },
                commit: function () {
                  return e.setIdentity(n), this;
                }
              };
            }),
            (e.prototype.getIdentity = function () {
              return $({}, this.identity);
            }),
            (e.prototype.setIdentity = function (e) {
              var t = $({}, this.identity);
              (this.identity = $({}, e)),
                q(t, this.identity) ||
                  this.listeners.forEach(function (t) {
                    t(e);
                  });
            }),
            (e.prototype.addIdentityListener = function (e) {
              this.listeners.add(e);
            }),
            (e.prototype.removeIdentityListener = function (e) {
              this.listeners.delete(e);
            }),
            e
          );
        })(),
        K = 'undefined' !== typeof globalThis ? globalThis : 'undefined' !== typeof n.g ? n.g : self,
        Q = (function () {
          function e() {
            (this.identityStore = new H()), (this.eventBridge = new B()), (this.applicationContextProvider = new U());
          }
          return (
            (e.getInstance = function (t) {
              return (
                K['analyticsConnectorInstances'] || (K['analyticsConnectorInstances'] = {}),
                K['analyticsConnectorInstances'][t] || (K['analyticsConnectorInstances'][t] = new e()),
                K['analyticsConnectorInstances'][t]
              );
            }),
            e
          );
        })(),
        Y = n(48764)['Buffer'];
      function X(e, t) {
        var n = Object.keys(e);
        if (Object.getOwnPropertySymbols) {
          var r = Object.getOwnPropertySymbols(e);
          t &&
            (r = r.filter(function (t) {
              return Object.getOwnPropertyDescriptor(e, t).enumerable;
            })),
            n.push.apply(n, r);
        }
        return n;
      }
      function J(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = null != arguments[t] ? arguments[t] : {};
          t % 2
            ? X(Object(n), !0).forEach(function (t) {
                re(e, t, n[t]);
              })
            : Object.getOwnPropertyDescriptors
              ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n))
              : X(Object(n)).forEach(function (t) {
                  Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));
                });
        }
        return e;
      }
      function Z(e) {
        return (
          (Z =
            'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e && 'function' == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? 'symbol' : typeof e;
                }),
          Z(e)
        );
      }
      function ee(e, t) {
        if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function');
      }
      function te(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          (r.enumerable = r.enumerable || !1), (r.configurable = !0), 'value' in r && (r.writable = !0), Object.defineProperty(e, fe(r.key), r);
        }
      }
      function ne(e, t, n) {
        return t && te(e.prototype, t), n && te(e, n), Object.defineProperty(e, 'prototype', { writable: !1 }), e;
      }
      function re(e, t, n) {
        return (t = fe(t)), t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : (e[t] = n), e;
      }
      function ie(e) {
        return oe(e) || se(e) || ae(e) || ce();
      }
      function oe(e) {
        if (Array.isArray(e)) return ue(e);
      }
      function se(e) {
        if (('undefined' !== typeof Symbol && null != e[Symbol.iterator]) || null != e['@@iterator']) return Array.from(e);
      }
      function ae(e, t) {
        if (e) {
          if ('string' === typeof e) return ue(e, t);
          var n = Object.prototype.toString.call(e).slice(8, -1);
          return (
            'Object' === n && e.constructor && (n = e.constructor.name),
            'Map' === n || 'Set' === n ? Array.from(e) : 'Arguments' === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? ue(e, t) : void 0
          );
        }
      }
      function ue(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
        return r;
      }
      function ce() {
        throw new TypeError(
          'Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
        );
      }
      function le(e, t) {
        var n = ('undefined' !== typeof Symbol && e[Symbol.iterator]) || e['@@iterator'];
        if (!n) {
          if (Array.isArray(e) || (n = ae(e)) || (t && e && 'number' === typeof e.length)) {
            n && (e = n);
            var r = 0,
              i = function () {};
            return {
              s: i,
              n: function () {
                return r >= e.length ? { done: !0 } : { done: !1, value: e[r++] };
              },
              e: function (e) {
                throw e;
              },
              f: i
            };
          }
          throw new TypeError(
            'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
          );
        }
        var o,
          s = !0,
          a = !1;
        return {
          s: function () {
            n = n.call(e);
          },
          n: function () {
            var e = n.next();
            return (s = e.done), e;
          },
          e: function (e) {
            (a = !0), (o = e);
          },
          f: function () {
            try {
              s || null == n.return || n.return();
            } finally {
              if (a) throw o;
            }
          }
        };
      }
      function he(e, t) {
        if ('object' !== typeof e || null === e) return e;
        var n = e[Symbol.toPrimitive];
        if (void 0 !== n) {
          var r = n.call(e, t || 'default');
          if ('object' !== typeof r) return r;
          throw new TypeError('@@toPrimitive must return a primitive value.');
        }
        return ('string' === t ? String : Number)(e);
      }
      function fe(e) {
        var t = he(e, 'string');
        return 'symbol' === typeof t ? t : String(t);
      }
      var de = {
          DEFAULT_INSTANCE: '$default_instance',
          API_VERSION: 2,
          MAX_STRING_LENGTH: 4096,
          MAX_PROPERTY_KEYS: 1e3,
          IDENTIFY_EVENT: '$identify',
          GROUP_IDENTIFY_EVENT: '$groupidentify',
          EVENT_LOG_URL: 'api.amplitude.com',
          EVENT_LOG_EU_URL: 'api.eu.amplitude.com',
          DYNAMIC_CONFIG_URL: 'regionconfig.amplitude.com',
          DYNAMIC_CONFIG_EU_URL: 'regionconfig.eu.amplitude.com',
          LAST_EVENT_ID: 'amplitude_lastEventId',
          LAST_EVENT_TIME: 'amplitude_lastEventTime',
          LAST_IDENTIFY_ID: 'amplitude_lastIdentifyId',
          LAST_SEQUENCE_NUMBER: 'amplitude_lastSequenceNumber',
          SESSION_ID: 'amplitude_sessionId',
          DEVICE_ID: 'amplitude_deviceId',
          OPT_OUT: 'amplitude_optOut',
          USER_ID: 'amplitude_userId',
          DEVICE_ID_INDEX: 0,
          USER_ID_INDEX: 1,
          OPT_OUT_INDEX: 2,
          SESSION_ID_INDEX: 3,
          LAST_EVENT_TIME_INDEX: 4,
          EVENT_ID_INDEX: 5,
          IDENTIFY_ID_INDEX: 6,
          SEQUENCE_NUMBER_INDEX: 7,
          COOKIE_TEST_PREFIX: 'amp_cookie_test',
          COOKIE_PREFIX: 'amp',
          STORAGE_DEFAULT: '',
          STORAGE_COOKIES: 'cookies',
          STORAGE_NONE: 'none',
          STORAGE_LOCAL: 'localStorage',
          STORAGE_SESSION: 'sessionStorage',
          REVENUE_EVENT: 'revenue_amount',
          REVENUE_PRODUCT_ID: '$productId',
          REVENUE_QUANTITY: '$quantity',
          REVENUE_PRICE: '$price',
          REVENUE_REVENUE_TYPE: '$revenueType',
          AMP_DEVICE_ID_PARAM: 'amp_device_id',
          AMP_REFERRER_PARAM: 'amp_referrer',
          REFERRER: 'referrer',
          REFERRING_DOMAIN: 'referring_domain',
          UTM_SOURCE: 'utm_source',
          UTM_MEDIUM: 'utm_medium',
          UTM_CAMPAIGN: 'utm_campaign',
          UTM_TERM: 'utm_term',
          UTM_CONTENT: 'utm_content',
          ATTRIBUTION_EVENT: '[Amplitude] Attribution Captured',
          TRANSPORT_HTTP: 'http',
          TRANSPORT_BEACON: 'beacon'
        },
        pe = {
          encode: function (e) {
            for (var t = '', n = 0; n < e.length; n++) {
              var r = e.charCodeAt(n);
              r < 128
                ? (t += String.fromCharCode(r))
                : r > 127 && r < 2048
                  ? ((t += String.fromCharCode((r >> 6) | 192)), (t += String.fromCharCode((63 & r) | 128)))
                  : ((t += String.fromCharCode((r >> 12) | 224)),
                    (t += String.fromCharCode(((r >> 6) & 63) | 128)),
                    (t += String.fromCharCode((63 & r) | 128)));
            }
            return t;
          },
          decode: function (e) {
            var t = '',
              n = 0,
              r = 0,
              i = 0,
              o = 0;
            while (n < e.length)
              (r = e.charCodeAt(n)),
                r < 128
                  ? ((t += String.fromCharCode(r)), n++)
                  : r > 191 && r < 224
                    ? ((i = e.charCodeAt(n + 1)), (t += String.fromCharCode(((31 & r) << 6) | (63 & i))), (n += 2))
                    : ((i = e.charCodeAt(n + 1)),
                      (o = e.charCodeAt(n + 2)),
                      (t += String.fromCharCode(((15 & r) << 12) | ((63 & i) << 6) | (63 & o))),
                      (n += 3));
            return t;
          }
        },
        ge = (function () {
          return 'undefined' !== typeof globalThis
            ? globalThis
            : 'undefined' !== typeof window
              ? window
              : 'undefined' !== typeof self
                ? self
                : 'undefined' !== typeof n.g
                  ? n.g
                  : void 0;
        })(),
        me = {
          _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',
          encode: function (e) {
            try {
              if (ge.btoa && ge.atob) return ge.btoa(unescape(encodeURIComponent(e)));
            } catch (t) {}
            return me._encode(e);
          },
          _encode: function (e) {
            var t,
              n,
              r,
              i,
              o,
              s,
              a,
              u = '',
              c = 0;
            e = pe.encode(e);
            while (c < e.length)
              (t = e.charCodeAt(c++)),
                (n = e.charCodeAt(c++)),
                (r = e.charCodeAt(c++)),
                (i = t >> 2),
                (o = ((3 & t) << 4) | (n >> 4)),
                (s = ((15 & n) << 2) | (r >> 6)),
                (a = 63 & r),
                isNaN(n) ? (s = a = 64) : isNaN(r) && (a = 64),
                (u = u + me._keyStr.charAt(i) + me._keyStr.charAt(o) + me._keyStr.charAt(s) + me._keyStr.charAt(a));
            return u;
          },
          decode: function (e) {
            try {
              if (ge.btoa && ge.atob) return decodeURIComponent(escape(ge.atob(e)));
            } catch (t) {}
            return me._decode(e);
          },
          _decode: function (e) {
            var t,
              n,
              r,
              i,
              o,
              s,
              a,
              u = '',
              c = 0;
            e = e.replace(/[^A-Za-z0-9+/=]/g, '');
            while (c < e.length)
              (i = me._keyStr.indexOf(e.charAt(c++))),
                (o = me._keyStr.indexOf(e.charAt(c++))),
                (s = me._keyStr.indexOf(e.charAt(c++))),
                (a = me._keyStr.indexOf(e.charAt(c++))),
                (t = (i << 2) | (o >> 4)),
                (n = ((15 & o) << 4) | (s >> 2)),
                (r = ((3 & s) << 6) | a),
                (u += String.fromCharCode(t)),
                64 !== s && (u += String.fromCharCode(n)),
                64 !== a && (u += String.fromCharCode(r));
            return (u = pe.decode(u)), u;
          }
        },
        ve = Object.prototype.toString;
      function ye(e) {
        switch (ve.call(e)) {
          case '[object Date]':
            return 'date';
          case '[object RegExp]':
            return 'regexp';
          case '[object Arguments]':
            return 'arguments';
          case '[object Array]':
            return 'array';
          case '[object Error]':
            return 'error';
        }
        return null === e
          ? 'null'
          : void 0 === e
            ? 'undefined'
            : e !== e
              ? 'nan'
              : e && 1 === e.nodeType
                ? 'element'
                : 'undefined' !== typeof Y && 'function' === typeof Y.isBuffer && Y.isBuffer(e)
                  ? 'buffer'
                  : ((e = e.valueOf ? e.valueOf() : Object.prototype.valueOf.apply(e)), Z(e));
      }
      var we,
        be = { DISABLE: 0, ERROR: 1, WARN: 2, INFO: 3 },
        _e = be.WARN,
        Ie = function (e) {
          Object.prototype.hasOwnProperty.call(be, e) && (_e = be[e]);
        },
        Ee = function () {
          return _e;
        },
        Se = {
          error: function (e) {
            _e >= be.ERROR && Te(e);
          },
          warn: function (e) {
            _e >= be.WARN && Te(e);
          },
          info: function (e) {
            _e >= be.INFO && Te(e);
          }
        },
        Te = function (e) {
          try {
            console.log('[Amplitude] ' + e);
          } catch (t) {}
        },
        Ae = function (e) {
          return !e || 0 === e.length;
        },
        xe = function () {
          try {
            if (ge.sessionStorage) return !0;
          } catch (e) {}
          return !1;
        },
        Ce = function e(t) {
          if ('array' === ye(t)) for (var n = 0; n < t.length; n++) t[n] = e(t[n]);
          else if ('object' === ye(t)) for (var r in t) r in t && (t[r] = e(t[r]));
          else t = ke(t);
          return t;
        },
        ke = function (e) {
          return 'string' === ye(e) && e.length > de.MAX_STRING_LENGTH ? e.substring(0, de.MAX_STRING_LENGTH) : e;
        },
        Oe = function (e, t, n) {
          return ye(e) === n || (Se.error('Invalid ' + t + ' input type. Expected ' + n + ' but received ' + ye(e)), !1);
        },
        Ne = function (e) {
          return (
            !!Oe(e, 'deviceId', 'string') &&
            (!(e.indexOf('.') >= 0) || (Se.error("Device IDs may not contain '.' characters. Value will be ignored: \"".concat(e, '"')), !1))
          );
        },
        Re = function (e) {
          return (
            !!Oe(e, 'transport', 'string') &&
            (e !== de.TRANSPORT_HTTP && e !== de.TRANSPORT_BEACON
              ? (Se.error("transport value must be one of '".concat(de.TRANSPORT_BEACON, "' or '").concat(de.TRANSPORT_HTTP, "'")), !1)
              : !(e !== de.TRANSPORT_HTTP && 'undefined' !== typeof navigator && !navigator.sendBeacon) ||
                (Se.error('browser does not support sendBeacon, so transport must be HTTP'), !1))
          );
        },
        Pe = function (e) {
          var t = ye(e);
          if ('object' !== t) return Se.error('Error: invalid properties format. Expecting Javascript object, received ' + t + ', ignoring'), {};
          if (Object.keys(e).length > de.MAX_PROPERTY_KEYS) return Se.error('Error: too many properties (more than 1000), ignoring'), {};
          var n = {};
          for (var r in e)
            if (Object.prototype.hasOwnProperty.call(e, r)) {
              var i = r,
                o = ye(i);
              'string' !== o &&
                ((i = String(i)), Se.warn('WARNING: Non-string property key, received type ' + o + ', coercing to string "' + i + '"'));
              var s = Le(i, e[r]);
              null !== s && (n[i] = s);
            }
          return n;
        },
        De = ['nan', 'function', 'arguments', 'regexp', 'element'],
        Le = function e(t, n) {
          var r = ye(n);
          if (-1 !== De.indexOf(r)) Se.warn('WARNING: Property key "' + t + '" with invalid value type ' + r + ', ignoring'), (n = null);
          else if ('undefined' === r) n = null;
          else if ('error' === r) (n = String(n)), Se.warn('WARNING: Property key "' + t + '" with value type error, coercing to ' + n);
          else if ('array' === r) {
            for (var i = [], o = 0; o < n.length; o++) {
              var s = n[o],
                a = ye(s);
              'array' !== a
                ? 'object' === a
                  ? i.push(Pe(s))
                  : i.push(e(t, s))
                : Se.warn('WARNING: Cannot have ' + a + ' nested in an array property value, skipping');
            }
            n = i;
          } else 'object' === r && (n = Pe(n));
          return n;
        },
        je = function (e) {
          var t = ye(e);
          if ('object' !== t) return Se.error('Error: invalid groups format. Expecting Javascript object, received ' + t + ', ignoring'), {};
          var n = {};
          for (var r in e)
            if (Object.prototype.hasOwnProperty.call(e, r)) {
              var i = r,
                o = ye(i);
              'string' !== o && ((i = String(i)), Se.warn('WARNING: Non-string groupType, received type ' + o + ', coercing to string "' + i + '"'));
              var s = Me(i, e[r]);
              null !== s && (n[i] = s);
            }
          return n;
        },
        Me = function (e, t) {
          var n = ye(t);
          if ('string' === n) return t;
          if ('date' === n || 'number' === n || 'boolean' === n)
            return (t = String(t)), Se.warn('WARNING: Non-string groupName, received type ' + n + ', coercing to string "' + t + '"'), t;
          if ('array' === n) {
            for (var r = [], i = 0; i < t.length; i++) {
              var o = t[i],
                s = ye(o);
              'array' !== s && 'object' !== s
                ? 'string' === s
                  ? r.push(o)
                  : ('date' !== s && 'number' !== s && 'boolean' !== s) ||
                    ((o = String(o)), Se.warn('WARNING: Non-string groupName, received type ' + s + ', coercing to string "' + o + '"'), r.push(o))
                : Se.warn('WARNING: Skipping nested ' + s + ' in array groupName');
            }
            return r;
          }
          Se.warn('WARNING: Non-string groupName, received type ' + n + '. Please use strings or array of strings for groupName');
        },
        Fe = function (e, t) {
          e = e.replace(/[[]/, '\\[').replace(/[\]]/, '\\]');
          var n = new RegExp('[\\?&]' + e + '=([^&#]*)'),
            r = n.exec(t);
          return null === r ? void 0 : decodeURIComponent(r[1].replace(/\+/g, ' '));
        },
        Ue = function () {
          return 'undefined' !== typeof WorkerGlobalScope;
        },
        Ve = function (e) {
          return (
            !!(Oe(e, 'sessionId', 'number') && new Date(e).getTime() > 0) ||
            (Se.error('sessionId value must in milliseconds since epoch (Unix Timestamp)'), !1)
          );
        },
        Be = function () {
          return ge.location;
        },
        $e = function (e) {
          var t = ge.location ? ge.location.hostname : '';
          if (e) {
            if ('undefined' !== typeof document) {
              var n = document.createElement('a');
              return (n.href = e), n.hostname || t;
            }
            if ('function' === typeof URL) {
              var r = new URL(e);
              return r.hostname || t;
            }
          }
          return t;
        },
        qe = {
          setLogLevel: Ie,
          getLogLevel: Ee,
          logLevels: be,
          log: Se,
          isEmptyString: Ae,
          isWebWorkerEnvironment: Ue,
          getQueryParam: Fe,
          sessionStorageEnabled: xe,
          truncate: Ce,
          validateGroups: je,
          validateInput: Oe,
          validateProperties: Pe,
          validateDeviceId: Ne,
          validateTransport: Re,
          validateSessionId: Ve,
          getLocation: Be,
          getHost: $e
        },
        ze = function (e) {
          try {
            for (var t = document.cookie.split(';'), n = null, r = 0; r < t.length; r++) {
              var i = t[r];
              while (' ' === i.charAt(0)) i = i.substring(1, i.length);
              if (0 === i.indexOf(e)) {
                n = i.substring(e.length, i.length);
                break;
              }
            }
            return n;
          } catch (o) {
            return null;
          }
        },
        Ge = function (e) {
          try {
            var t,
              n = document.cookie.split(';').map(function (e) {
                return e.trimStart();
              }),
              r = [],
              i = le(n);
            try {
              for (i.s(); !(t = i.n()).done; ) {
                var o = t.value;
                while (' ' === o.charAt(0)) o = o.substring(1);
                0 === o.indexOf(e) && r.push(o.substring(e.length));
              }
            } catch (s) {
              i.e(s);
            } finally {
              i.f();
            }
            return r;
          } catch (a) {
            return [];
          }
        },
        We = function (e, t, n) {
          var r = null !== t ? n.expirationDays : -1;
          if (r) {
            var i = new Date();
            i.setTime(i.getTime() + 24 * r * 60 * 60 * 1e3), (r = i);
          }
          var o = e + '=' + t;
          r && (o += '; expires=' + r.toUTCString()),
            (o += '; path=/'),
            n.domain && (o += '; domain=' + n.domain),
            n.secure && (o += '; Secure'),
            n.sameSite && (o += '; SameSite=' + n.sameSite),
            (document.cookie = o);
        },
        He = function () {
          var e,
            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : '',
            n = t.split('.')[de.LAST_EVENT_TIME_INDEX];
          return n && (e = parseInt(n, 32)), e || (qe.log.warn('unable to parse malformed cookie: '.concat(t)), 0);
        },
        Ke = function (e) {
          return ie(e).sort(function (e, t) {
            var n = He(e),
              r = He(t);
            return r - n;
          });
        },
        Qe = function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            t = de.COOKIE_TEST_PREFIX;
          if ('undefined' === typeof document) return !1;
          var n = !1;
          try {
            var r = String(Date.now());
            We(t, r, e), qe.log.info('Testing if cookies available'), (n = ze(t + '=') === r);
          } catch (i) {
            qe.log.warn('Error thrown when checking for cookies. Reason: "'.concat(i, '"'));
          } finally {
            qe.log.info('Cleaning up cookies availability test'), We(t, null, e);
          }
          return n;
        },
        Ye = { set: We, get: ze, getAll: Ge, getLastEventTime: He, sortByEventTime: Ke, areCookiesEnabled: Qe },
        Xe = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_',
        Je = function () {
          for (var e = '', t = 0; t < 22; ++t) e += Xe.charAt(Math.floor(64 * Math.random()));
          return e;
        },
        Ze = function (e) {
          var t = qe.getHost(e),
            n = t.split('.'),
            r = [],
            i = '_tldtest_' + Je();
          if (qe.isWebWorkerEnvironment()) return '';
          for (var o = n.length - 2; o >= 0; --o) r.push(n.slice(o).join('.'));
          for (var s = 0; s < r.length; ++s) {
            var a = r[s],
              u = { domain: '.' + a };
            if ((Ye.set(i, 1, u), Ye.get(i))) return Ye.set(i, null, u), a;
          }
          return '';
        },
        et = { expirationDays: void 0, domain: void 0 },
        tt = function () {
          et = { expirationDays: void 0, domain: void 0 };
        },
        nt = function (e) {
          if (0 === arguments.length) return et;
          (e = e || {}), (et.expirationDays = e.expirationDays), (et.secure = e.secure), (et.sameSite = e.sameSite);
          var t = qe.isEmptyString(e.domain) ? '.' + Ze(qe.getLocation().href) : e.domain,
            n = Math.random();
          (et.domain = t), ot('amplitude_test', n);
          var r = it('amplitude_test');
          return (r && r === n) || (t = null), ut('amplitude_test'), (et.domain = t), et;
        },
        rt = function (e) {
          var t = '';
          return et.domain && (t = '.' === et.domain.charAt(0) ? et.domain.substring(1) : et.domain), e + t;
        },
        it = function (e) {
          var t = rt(e) + '=',
            n = Ye.get(t);
          try {
            if (n) return JSON.parse(me.decode(n));
          } catch (r) {
            return null;
          }
          return null;
        },
        ot = function (e, t) {
          try {
            return Ye.set(rt(e), me.encode(JSON.stringify(t)), et), !0;
          } catch (n) {
            return !1;
          }
        },
        st = function (e, t) {
          try {
            return Ye.set(rt(e), t, et), !0;
          } catch (n) {
            return !1;
          }
        },
        at = function (e) {
          var t = rt(e) + '=';
          return Ye.get(t);
        },
        ut = function (e) {
          try {
            return Ye.set(rt(e), null, et), !0;
          } catch (t) {
            return !1;
          }
        },
        ct = { reset: tt, options: nt, get: it, set: ot, remove: ut, setRaw: st, getRaw: at },
        lt = (function () {
          function e() {
            ee(this, e), (this.map = new Map()), (this.length = 0);
          }
          return (
            ne(e, [
              {
                key: 'key',
                value: function (e) {
                  var t = Array.from(this.map.keys()),
                    n = t[e];
                  return this.map.get(n);
                }
              },
              {
                key: 'getItem',
                value: function (e) {
                  return this.map.get(e);
                }
              },
              {
                key: 'setItem',
                value: function (e, t) {
                  this.map.has(e) || (this.length += 1), this.map.set(e, t);
                }
              },
              {
                key: 'removeItem',
                value: function (e) {
                  this.map.has(e) && ((this.length -= 1), this.map['delete'](e));
                }
              },
              {
                key: 'clear',
                value: function () {
                  this.map.clear(), (this.length = 0);
                }
              }
            ]),
            e
          );
        })(),
        ht = function () {
          var e,
            t = new Date();
          try {
            return ge.localStorage.setItem(t, t), (e = ge.localStorage.getItem(t) === String(t)), ge.localStorage.removeItem(t), e;
          } catch (n) {}
          return !1;
        };
      if (ht()) we = ge.localStorage;
      else if ('undefined' !== typeof ge && ge.globalStorage)
        try {
          we = ge.globalStorage[ge.location.hostname];
        } catch (fn) {}
      else if ('undefined' !== typeof document) {
        var ft = document.createElement('div'),
          dt = 'localStorage';
        (ft.style.display = 'none'),
          document.getElementsByTagName('head')[0].appendChild(ft),
          ft.addBehavior &&
            (ft.addBehavior('#default#userdata'),
            (we = {
              length: 0,
              setItem: function (e, t) {
                ft.load(dt), ft.getAttribute(e) || this.length++, ft.setAttribute(e, t), ft.save(dt);
              },
              getItem: function (e) {
                return ft.load(dt), ft.getAttribute(e);
              },
              removeItem: function (e) {
                ft.load(dt), ft.getAttribute(e) && this.length--, ft.removeAttribute(e), ft.save(dt);
              },
              clear: function () {
                ft.load(dt);
                var e,
                  t = 0;
                while ((e = ft.XMLDocument.documentElement.attributes[t++])) ft.removeAttribute(e.name);
                ft.save(dt), (this.length = 0);
              },
              key: function (e) {
                return ft.load(dt), ft.XMLDocument.documentElement.attributes[e];
              }
            }),
            ft.load(dt),
            (we.length = ft.XMLDocument.documentElement.attributes.length));
      } else qe.isWebWorkerEnvironment() && (we = new lt());
      we ||
        (we = {
          length: 0,
          setItem: function (e, t) {},
          getItem: function (e) {},
          removeItem: function (e) {},
          clear: function () {},
          key: function (e) {}
        });
      var pt,
        gt = we,
        mt = function () {
          this.storage = null;
        };
      mt.prototype.getStorage = function (e) {
        if (null !== this.storage) return this.storage;
        if (!e && Ye.areCookiesEnabled()) this.storage = ct;
        else {
          var t = 'amp_cookiestore_';
          this.storage = {
            _options: { expirationDays: void 0, domain: void 0, secure: !1 },
            reset: function () {
              this._options = { expirationDays: void 0, domain: void 0, secure: !1 };
            },
            options: function (e) {
              return 0 === arguments.length
                ? this._options
                : ((e = e || {}),
                  (this._options.expirationDays = e.expirationDays || this._options.expirationDays),
                  (this._options.domain = e.domain || this._options.domain || (ge && ge.location && ge.location.hostname)),
                  (this._options.secure = e.secure || !1));
            },
            get: function (e) {
              try {
                return JSON.parse(gt.getItem(t + e));
              } catch (fn) {}
              return null;
            },
            set: function (e, n) {
              try {
                return gt.setItem(t + e, JSON.stringify(n)), !0;
              } catch (fn) {}
              return !1;
            },
            remove: function (e) {
              try {
                gt.removeItem(t + e);
              } catch (fn) {
                return !1;
              }
            }
          };
        }
        return this.storage;
      };
      var vt =
          ((pt = {}), re(pt, de.STORAGE_COOKIES, !0), re(pt, de.STORAGE_NONE, !0), re(pt, de.STORAGE_LOCAL, !0), re(pt, de.STORAGE_SESSION, !0), pt),
        yt = (function () {
          function e(t) {
            var n = t.storageKey,
              r = t.disableCookies,
              i = t.domain,
              o = t.secure,
              s = t.sameSite,
              a = t.expirationDays,
              u = t.storage;
            ee(this, e),
              (this.storageKey = n),
              (this.domain = i),
              (this.secure = o),
              (this.sameSite = s),
              (this.expirationDays = a),
              (this.cookieDomain = '');
            var c = qe.getLocation() ? qe.getLocation().href : void 0,
              l = r ? '' : Ze(c);
            if (((this.cookieDomain = i || (l ? '.' + l : null)), vt[u])) this.storage = u;
            else {
              var h =
                r ||
                !Ye.areCookiesEnabled({
                  domain: this.cookieDomain,
                  secure: this.secure,
                  sameSite: this.sameSite,
                  expirationDays: this.expirationDays
                });
              this.storage = h ? de.STORAGE_LOCAL : de.STORAGE_COOKIES;
            }
          }
          return (
            ne(e, [
              {
                key: 'getCookieStorageKey',
                value: function () {
                  if (!this.domain) return this.storageKey;
                  var e = '.' === this.domain.charAt(0) ? this.domain.substring(1) : this.domain;
                  return ''.concat(this.storageKey).concat(e ? '_'.concat(e) : '');
                }
              },
              {
                key: 'save',
                value: function (e) {
                  var t = e.deviceId,
                    n = e.userId,
                    r = e.optOut,
                    i = e.sessionId,
                    o = e.lastEventTime,
                    s = e.eventId,
                    a = e.identifyId,
                    u = e.sequenceNumber;
                  if (this.storage !== de.STORAGE_NONE) {
                    var c = [
                      t,
                      me.encode(n || ''),
                      r ? '1' : '',
                      i ? i.toString(32) : '0',
                      o ? o.toString(32) : '0',
                      s ? s.toString(32) : '0',
                      a ? a.toString(32) : '0',
                      u ? u.toString(32) : '0'
                    ].join('.');
                    switch (this.storage) {
                      case de.STORAGE_SESSION:
                        ge.sessionStorage && ge.sessionStorage.setItem(this.storageKey, c);
                        break;
                      case de.STORAGE_LOCAL:
                        gt.setItem(this.storageKey, c);
                        break;
                      case de.STORAGE_COOKIES:
                        this.saveCookie(c);
                        break;
                    }
                  }
                }
              },
              {
                key: 'saveCookie',
                value: function (e) {
                  Ye.set(this.getCookieStorageKey(), e, {
                    domain: this.cookieDomain,
                    secure: this.secure,
                    sameSite: this.sameSite,
                    expirationDays: this.expirationDays
                  });
                }
              },
              {
                key: 'load',
                value: function () {
                  var e,
                    t = this;
                  if (this.storage === de.STORAGE_COOKIES) {
                    var n = this.getCookieStorageKey() + '=',
                      r = Ye.getAll(n);
                    if (0 === r.length || 1 === r.length) e = r[0];
                    else {
                      var i = Ye.sortByEventTime(r)[0];
                      r.forEach(function () {
                        return Ye.set(t.getCookieStorageKey(), null, {});
                      }),
                        this.saveCookie(i),
                        (e = Ye.get(n));
                    }
                  }
                  if ((e || (e = gt.getItem(this.storageKey)), !e))
                    try {
                      e = ge.sessionStorage && ge.sessionStorage.getItem(this.storageKey);
                    } catch (fn) {
                      qe.log.info('window.sessionStorage unavailable. Reason: "'.concat(fn, '"'));
                    }
                  if (!e) return null;
                  var o = e.split('.'),
                    s = null;
                  if (o[de.USER_ID_INDEX])
                    try {
                      s = me.decode(o[de.USER_ID_INDEX]);
                    } catch (fn) {
                      s = null;
                    }
                  return {
                    deviceId: o[de.DEVICE_ID_INDEX],
                    userId: s,
                    optOut: '1' === o[de.OPT_OUT_INDEX],
                    sessionId: parseInt(o[de.SESSION_ID_INDEX], 32),
                    lastEventTime: parseInt(o[de.LAST_EVENT_TIME_INDEX], 32),
                    eventId: parseInt(o[de.EVENT_ID_INDEX], 32),
                    identifyId: parseInt(o[de.IDENTIFY_ID_INDEX], 32),
                    sequenceNumber: parseInt(o[de.SEQUENCE_NUMBER_INDEX], 32)
                  };
                }
              },
              {
                key: 'clear',
                value: function () {
                  var e;
                  if (
                    (this.storage === de.STORAGE_COOKIES &&
                      ((e = Ye.get(this.getCookieStorageKey() + '=')),
                      Ye.set(this.getCookieStorageKey(), null, {
                        domain: this.cookieDomain,
                        secure: this.secure,
                        sameSite: this.sameSite,
                        expirationDays: 0
                      })),
                    e || ((e = gt.getItem(this.storageKey)), gt.clear()),
                    !e)
                  )
                    try {
                      (e = ge.sessionStorage && ge.sessionStorage.getItem(this.storageKey)), ge.sessionStorage.clear();
                    } catch (fn) {
                      qe.log.info('window.sessionStorage unavailable. Reason: "'.concat(fn, '"'));
                    }
                  return !!e;
                }
              }
            ]),
            e
          );
        })(),
        wt = function (e, t) {
          var n = e ? '?' + e.split('.').slice(-1)[0].replace(/\|/g, '&') : '',
            r = function (e, t, n, r) {
              return qe.getQueryParam(e, t) || qe.getQueryParam(n, r);
            },
            i = r(de.UTM_SOURCE, t, 'utmcsr', n),
            o = r(de.UTM_MEDIUM, t, 'utmcmd', n),
            s = r(de.UTM_CAMPAIGN, t, 'utmccn', n),
            a = r(de.UTM_TERM, t, 'utmctr', n),
            u = r(de.UTM_CONTENT, t, 'utmcct', n),
            c = {},
            l = function (e, t) {
              qe.isEmptyString(t) || (c[e] = t);
            };
          return l(de.UTM_SOURCE, i), l(de.UTM_MEDIUM, o), l(de.UTM_CAMPAIGN, s), l(de.UTM_TERM, a), l(de.UTM_CONTENT, u), c;
        },
        bt = '$add',
        _t = '$append',
        It = '$clearAll',
        Et = '$prepend',
        St = '$set',
        Tt = '$setOnce',
        At = '$unset',
        xt = '$preInsert',
        Ct = '$postInsert',
        kt = '$remove',
        Ot = function () {
          (this.userPropertiesOperations = {}), (this.properties = []);
        };
      (Ot.prototype.add = function (e, t) {
        return (
          'number' === ye(t) || 'string' === ye(t)
            ? this._addOperation(bt, e, t)
            : qe.log.error('Unsupported type for value: ' + ye(t) + ', expecting number or string'),
          this
        );
      }),
        (Ot.prototype.append = function (e, t) {
          return this._addOperation(_t, e, t), this;
        }),
        (Ot.prototype.clearAll = function () {
          return Object.keys(this.userPropertiesOperations).length > 0
            ? (Object.prototype.hasOwnProperty.call(this.userPropertiesOperations, It) ||
                qe.log.error('Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll'),
              this)
            : ((this.userPropertiesOperations[It] = '-'), this);
        }),
        (Ot.prototype.prepend = function (e, t) {
          return this._addOperation(Et, e, t), this;
        }),
        (Ot.prototype.set = function (e, t) {
          return this._addOperation(St, e, t), this;
        }),
        (Ot.prototype.setOnce = function (e, t) {
          return this._addOperation(Tt, e, t), this;
        }),
        (Ot.prototype.unset = function (e) {
          return this._addOperation(At, e, '-'), this;
        }),
        (Ot.prototype.preInsert = function (e, t) {
          return this._addOperation(xt, e, t), this;
        }),
        (Ot.prototype.postInsert = function (e, t) {
          return this._addOperation(Ct, e, t), this;
        }),
        (Ot.prototype.remove = function (e, t) {
          return this._addOperation(kt, e, t), this;
        }),
        (Ot.prototype._addOperation = function (e, t, n) {
          Object.prototype.hasOwnProperty.call(this.userPropertiesOperations, It)
            ? qe.log.error('This identify already contains a $clearAll operation, skipping operation ' + e)
            : -1 === this.properties.indexOf(t)
              ? (Object.prototype.hasOwnProperty.call(this.userPropertiesOperations, e) || (this.userPropertiesOperations[e] = {}),
                (this.userPropertiesOperations[e][t] = n),
                this.properties.push(t))
              : qe.log.error('User property "' + t + '" already used in this identify, skipping operation ' + e);
        });
      var Nt = function (e, t, n) {
          (this.url = e), (this.data = t || {}), (this.headers = n);
        },
        Rt = 'Cross-Origin-Resource-Policy';
      function Pt(e, t) {
        for (var n in t) (n !== Rt || t[n]) && e.setRequestHeader(n, t[n]);
      }
      Nt.prototype.send = function (e) {
        var t = !!ge.XDomainRequest;
        if (t) {
          var n = new ge.XDomainRequest();
          n.open('POST', this.url, !0),
            (n.onload = function () {
              e(200, n.responseText);
            }),
            (n.onerror = function () {
              'Request Entity Too Large' === n.responseText ? e(413, n.responseText) : e(500, n.responseText);
            }),
            (n.ontimeout = function () {}),
            (n.onprogress = function () {}),
            n.send(j.stringify(this.data));
        } else if ('undefined' !== typeof XMLHttpRequest) {
          var r = new XMLHttpRequest();
          r.open('POST', this.url, !0),
            (r.onreadystatechange = function () {
              4 === r.readyState && e(r.status, r.responseText);
            }),
            Pt(r, this.headers),
            r.send(j.stringify(this.data));
        } else {
          var i = void 0;
          fetch(this.url, { method: 'POST', headers: this.headers, body: j.stringify(this.data) })
            .then(function (e) {
              return (i = e.status), e.text();
            })
            .then(function (t) {
              e(i, t);
            });
        }
      };
      var Dt = function () {
        (this._price = null), (this._productId = null), (this._quantity = 1), (this._revenueType = null), (this._properties = null);
      };
      (Dt.prototype.setProductId = function (e) {
        return (
          'string' !== ye(e)
            ? qe.log.error('Unsupported type for productId: ' + ye(e) + ', expecting string')
            : qe.isEmptyString(e)
              ? qe.log.error('Invalid empty productId')
              : (this._productId = e),
          this
        );
      }),
        (Dt.prototype.setQuantity = function (e) {
          return (
            'number' !== ye(e) ? qe.log.error('Unsupported type for quantity: ' + ye(e) + ', expecting number') : (this._quantity = parseInt(e)), this
          );
        }),
        (Dt.prototype.setPrice = function (e) {
          return 'number' !== ye(e) ? qe.log.error('Unsupported type for price: ' + ye(e) + ', expecting number') : (this._price = e), this;
        }),
        (Dt.prototype.setRevenueType = function (e) {
          return (
            'string' !== ye(e) ? qe.log.error('Unsupported type for revenueType: ' + ye(e) + ', expecting string') : (this._revenueType = e), this
          );
        }),
        (Dt.prototype.setEventProperties = function (e) {
          return (
            'object' !== ye(e)
              ? qe.log.error('Unsupported type for eventProperties: ' + ye(e) + ', expecting object')
              : (this._properties = qe.validateProperties(e)),
            this
          );
        }),
        (Dt.prototype._isValidRevenue = function () {
          return 'number' === ye(this._price) || (qe.log.error('Invalid revenue, need to set price field'), !1);
        }),
        (Dt.prototype._toJSONObject = function () {
          var e = 'object' === ye(this._properties) ? this._properties : {};
          return (
            null !== this._productId && (e[de.REVENUE_PRODUCT_ID] = this._productId),
            null !== this._quantity && (e[de.REVENUE_QUANTITY] = this._quantity),
            null !== this._price && (e[de.REVENUE_PRICE] = this._price),
            null !== this._revenueType && (e[de.REVENUE_REVENUE_TYPE] = this._revenueType),
            e
          );
        });
      var Lt = function e(t) {
          return t ? (t ^ ((16 * Math.random()) >> (t / 4))).toString(16) : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, e);
        },
        jt = function () {
          return (
            ('undefined' !== typeof navigator && ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)) ||
            ''
          );
        },
        Mt = { getLanguage: jt },
        Ft = { US: 'US', EU: 'EU' },
        Ut = function (e) {
          var t = de.EVENT_LOG_URL;
          switch (e) {
            case Ft.EU:
              t = de.EVENT_LOG_EU_URL;
              break;
            case Ft.US:
              t = de.EVENT_LOG_URL;
              break;
          }
          return t;
        },
        Vt = function (e) {
          var t = de.DYNAMIC_CONFIG_URL;
          switch (e) {
            case Ft.EU:
              t = de.DYNAMIC_CONFIG_EU_URL;
              break;
            case Ft.US:
              t = de.DYNAMIC_CONFIG_URL;
              break;
          }
          return t;
        },
        Bt = '8.21.9',
        $t = {
          apiEndpoint: de.EVENT_LOG_URL,
          batchEvents: !1,
          cookieExpiration: 365,
          cookieName: 'amplitude_id',
          sameSiteCookie: 'Lax',
          cookieForceUpgrade: !1,
          deferInitialization: !1,
          disableCookies: !1,
          deviceIdFromUrlParam: !1,
          domain: '',
          eventUploadPeriodMillis: 3e4,
          eventUploadThreshold: 30,
          forceHttps: !0,
          includeFbclid: !1,
          includeGclid: !1,
          includeReferrer: !1,
          includeUtm: !1,
          ingestionMetadata: { sourceName: '', sourceVersion: '' },
          language: Mt.getLanguage(),
          library: { name: 'amplitude-js', version: Bt },
          logLevel: 'WARN',
          logAttributionCapturedEvent: !1,
          optOut: !1,
          onError: function () {},
          onExitPage: function () {},
          onNewSessionStart: function () {},
          plan: { branch: '', source: '', version: '', versionId: '' },
          platform: 'Web',
          savedMaxCount: 1e3,
          saveEvents: !0,
          saveParamsReferrerOncePerSession: !0,
          secureCookie: !1,
          sessionTimeout: 18e5,
          storage: de.STORAGE_DEFAULT,
          trackingOptions: {
            city: !0,
            country: !0,
            carrier: !0,
            device_manufacturer: !0,
            device_model: !0,
            dma: !0,
            ip_address: !0,
            language: !0,
            os_name: !0,
            os_version: !0,
            platform: !0,
            region: !0,
            version_name: !0
          },
          transport: de.TRANSPORT_HTTP,
          unsetParamsReferrerOnNewSession: !1,
          unsentKey: 'amplitude_unsent',
          unsentIdentifyKey: 'amplitude_unsent_identify',
          uploadBatchSize: 100,
          headers: { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8', 'Cross-Origin-Resource-Policy': 'cross-origin' },
          serverZone: Ft.US,
          useDynamicConfig: !1,
          serverZoneBasedApi: !1,
          sessionId: null,
          partnerId: ''
        },
        qt = (function () {
          function e() {
            return ee(this, e), e.instance || ((this.ingestionEndpoint = de.EVENT_LOG_URL), (e.instance = this)), e.instance;
          }
          return (
            ne(e, [
              {
                key: 'refresh',
                value: function (e, t, n) {
                  var r = 'https';
                  t || 'https:' === ge.location.protocol || (r = 'http');
                  var i = r + '://' + Vt(e),
                    o = this,
                    s = !!ge.XDomainRequest;
                  if (s) {
                    var a = new ge.XDomainRequest();
                    a.open('GET', i, !0),
                      (a.onload = function () {
                        var e = JSON.parse(a.responseText);
                        (o.ingestionEndpoint = e['ingestionEndpoint']), n && n();
                      }),
                      (a.onerror = function () {}),
                      (a.ontimeout = function () {}),
                      (a.onprogress = function () {}),
                      a.send();
                  } else {
                    var u = new XMLHttpRequest();
                    u.open('GET', i, !0),
                      (u.onreadystatechange = function () {
                        if (4 === u.readyState && 200 === u.status) {
                          var e = JSON.parse(u.responseText);
                          (o.ingestionEndpoint = e['ingestionEndpoint']), n && n();
                        }
                      }),
                      u.send();
                  }
                }
              }
            ]),
            e
          );
        })(),
        zt = new qt(),
        Gt = function (e) {
          i() ||
            qe.isWebWorkerEnvironment() ||
            qe.log.warn(
              'amplitude-js will not work in a non-browser environment. If you are planning to add Amplitude to a node environment, please use @amplitude/node'
            ),
            (this._instanceName = qe.isEmptyString(e) ? de.DEFAULT_INSTANCE : e.toLowerCase()),
            (this._unsentEvents = []),
            (this._unsentIdentifys = []),
            (this.options = J(
              J({}, $t),
              {},
              {
                headers: J({}, $t.headers),
                ingestionMetadata: J({}, $t.ingestionMetadata),
                library: J({}, $t.library),
                plan: J({}, $t.plan),
                trackingOptions: J({}, $t.trackingOptions)
              }
            )),
            (this._q = []),
            (this._sending = !1),
            (this._updateScheduled = !1),
            (this._onInitCallbacks = []),
            (this._onNewSessionStartCallbacks = []),
            (this._eventId = 0),
            (this._identifyId = 0),
            (this._lastEventTime = null),
            (this._newSession = !1),
            (this._sequenceNumber = 0),
            (this._sessionId = null),
            (this._isInitialized = !1),
            (this._connector = null),
            (this._userAgent = ('undefined' !== typeof navigator && navigator && navigator.userAgent) || null),
            (this._ua = new (F())(this._userAgent).getResult());
        };
      (Gt.prototype.Identify = Ot),
        (Gt.prototype.Revenue = Dt),
        (Gt.prototype.init = function (e, t, n, r) {
          var s = this;
          if ('string' !== ye(e) || qe.isEmptyString(e)) qe.log.error('Invalid apiKey. Please re-initialize with a valid apiKey');
          else
            try {
              (this._connector = Q.getInstance(this._instanceName)),
                Ht(this.options, n),
                (i() || qe.isWebWorkerEnvironment()) &&
                  void 0 !== ge.Prototype &&
                  Array.prototype.toJSON &&
                  (o(), qe.log.warn('Prototype.js injected Array.prototype.toJSON. Deleting Array.prototype.toJSON to prevent double-stringify')),
                this.options.cookieName !== $t.cookieName &&
                  qe.log.warn('The cookieName option is deprecated. We will be ignoring it for newer cookies'),
                this.options.serverZoneBasedApi && (this.options.apiEndpoint = Ut(this.options.serverZone)),
                this._refreshDynamicConfig(),
                (this.options.apiKey = e),
                (this._storageSuffix = '_' + e + (this._instanceName === de.DEFAULT_INSTANCE ? '' : '_' + this._instanceName)),
                (this._storageSuffixV5 = e.slice(0, 6)),
                (this._oldCookiename = this.options.cookieName + this._storageSuffix),
                (this._unsentKey = this.options.unsentKey + this._storageSuffix),
                (this._unsentIdentifyKey = this.options.unsentIdentifyKey + this._storageSuffix),
                (this._cookieName = de.COOKIE_PREFIX + '_' + this._storageSuffixV5),
                (this.cookieStorage = new mt().getStorage(this.options.disableCookies)),
                this.cookieStorage.options({
                  expirationDays: this.options.cookieExpiration,
                  domain: this.options.domain,
                  secure: this.options.secureCookie,
                  sameSite: this.options.sameSiteCookie
                }),
                (this._metadataStorage = new yt({
                  storageKey: this._cookieName,
                  disableCookies: this.options.disableCookies,
                  expirationDays: this.options.cookieExpiration,
                  domain: this.options.domain,
                  secure: this.options.secureCookie,
                  sameSite: this.options.sameSiteCookie,
                  storage: this.options.storage
                }));
              var a = !!this.cookieStorage.get(this._oldCookiename),
                u = !!this._metadataStorage.load();
              this._useOldCookie = !u && a && !this.options.cookieForceUpgrade;
              var c = u || a;
              if (this.options.deferInitialization && !c) return void this._deferInitialization(e, t, n, r);
              (this.options.domain = this.cookieStorage.options().domain),
                'string' === ye(this.options.logLevel) && qe.setLogLevel(this.options.logLevel);
              var l = rn(this);
              (this._apiPropertiesTrackingOptions = Object.keys(l).length > 0 ? { tracking_options: l } : {}),
                this.options.cookieForceUpgrade && a && (u || Qt(this), this.cookieStorage.remove(this._oldCookiename)),
                Kt(this),
                (this._pendingReadStorage = !0);
              var h = function (e) {
                n &&
                  n.deviceId &&
                  !qe.validateDeviceId(n.deviceId) &&
                  (qe.log.error('Invalid device ID rejected. Randomly generated UUID will be used instead of "'.concat(n.deviceId, '"')),
                  delete n.deviceId),
                  (s.options.deviceId = s._getInitialDeviceId(n && n.deviceId, e)),
                  (s.options.userId =
                    ('string' === ye(t) && !qe.isEmptyString(t) && t) || ('number' === ye(t) && t.toString()) || s.options.userId || null);
                var r = new Date().getTime(),
                  i = !s._sessionId || !s._lastEventTime || r - s._lastEventTime > s.options.sessionTimeout || s.options.sessionId;
                i &&
                  (s.options.unsetParamsReferrerOnNewSession && s._unsetUTMParams(),
                  (s._newSession = !0),
                  (s._sessionId = s.options.sessionId || r),
                  (s.options.sessionId = void 0),
                  s.options.saveParamsReferrerOncePerSession && s._trackParamsAndReferrer()),
                  s.options.saveParamsReferrerOncePerSession || s._trackParamsAndReferrer(),
                  s.options.saveEvents && (Wt(s._unsentEvents), Wt(s._unsentIdentifys)),
                  (s._lastEventTime = r),
                  Xt(s),
                  (s._pendingReadStorage = !1),
                  s._sendEventsIfReady();
                for (var o = 0; o < s._onInitCallbacks.length; o++) s._onInitCallbacks[o](s);
                (s._onInitCallbacks = []), (s._isInitialized = !0), i && s._runNewSessionStartCallbacks();
              };
              this.options.saveEvents &&
                ((this._unsentEvents = this._loadSavedUnsentEvents(this.options.unsentKey)
                  .map(function (e) {
                    return { event: e };
                  })
                  .concat(this._unsentEvents)),
                (this._unsentIdentifys = this._loadSavedUnsentEvents(this.options.unsentIdentifyKey)
                  .map(function (e) {
                    return { event: e };
                  })
                  .concat(this._unsentIdentifys))),
                n && n.onNewSessionStart && this.onNewSessionStart(this.options.onNewSessionStart),
                h(),
                this.runQueuedFunctions(),
