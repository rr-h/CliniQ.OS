          var e;
          return this.assertAuthConfigured(), (null === (e = this.auth.currentUser) || void 0 === e ? void 0 : e.uid) || null;
        }
        async getToken(e) {
          if ((this.assertAuthConfigured(), await this.auth._initializationPromise, !this.auth.currentUser)) return null;
          const t = await this.auth.currentUser.getIdToken(e);
          return { accessToken: t };
        }
        addAuthTokenListener(e) {
          if ((this.assertAuthConfigured(), this.internalListeners.has(e))) return;
          const t = this.auth.onIdTokenChanged(t => {
            e((null === t || void 0 === t ? void 0 : t.stsTokenManager.accessToken) || null);
          });
          this.internalListeners.set(e, t), this.updateProactiveRefresh();
        }
        removeAuthTokenListener(e) {
          this.assertAuthConfigured();
          const t = this.internalListeners.get(e);
          t && (this.internalListeners.delete(e), t(), this.updateProactiveRefresh());
        }
        assertAuthConfigured() {
          S(this.auth._initializationPromise, 'dependent-sdk-initialized-before-auth');
        }
        updateProactiveRefresh() {
          this.internalListeners.size > 0 ? this.auth._startProactiveRefresh() : this.auth._stopProactiveRefresh();
        }
      }
      /**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */ function wo(e) {
        switch (e) {
          case 'Node':
            return 'node';
          case 'ReactNative':
            return 'rn';
          case 'Worker':
            return 'webworker';
          case 'Cordova':
            return 'cordova';
          default:
            return;
        }
      }
      function bo(e) {
        (0, o._registerComponent)(
          new u.wA(
            'auth',
            (t, { options: n }) => {
              const r = t.getProvider('app').getImmediate(),
                i = t.getProvider('heartbeat'),
                o = t.getProvider('app-check-internal'),
                { apiKey: s, authDomain: a } = r.options;
              S(s && !s.includes(':'), 'invalid-api-key', { appName: r.name });
              const u = {
                  apiKey: s,
                  authDomain: a,
                  clientPlatform: e,
                  apiHost: 'identitytoolkit.googleapis.com',
                  tokenApiHost: 'securetoken.googleapis.com',
                  apiScheme: 'https',
                  sdkClientVersion: Oe(e)
                },
                c = new Ge(r, i, o, u);
              return Ke(c, n), c;
            },
            'PUBLIC'
          )
            .setInstantiationMode('EXPLICIT')
            .setInstanceCreatedCallback((e, t, n) => {
              const r = e.getProvider('auth-internal');
              r.initialize();
            })
        ),
          (0, o._registerComponent)(
            new u.wA(
              'auth-internal',
              e => {
                const t = We(e.getProvider('auth').getImmediate());
                return (e => new yo(e))(t);
              },
              'PRIVATE'
            ).setInstantiationMode('EXPLICIT')
          ),
          (0, o.registerVersion)(mo, vo, wo(e)),
          (0, o.registerVersion)(mo, vo, 'esm2017');
      }
      /**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */ const _o = 300;
      (0, i.Pz)('authIdTokenMaxAge');
      /**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
      function Io() {
        return window;
      }
      /**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */ bo('Browser');
      const Eo = 2e3;
      async function So(e, t, n) {
        var r;
        const { BuildInfo: i } = Io();
        A(t.sessionId, 'AuthEvent did not contain a session ID');
        const o = await ko(t.sessionId),
          s = {};
        return (
          Se() ? (s['ibi'] = i.packageName) : _e() ? (s['apn'] = i.packageName) : w(e, 'operation-not-supported-in-this-environment'),
          i.displayName && (s['appDisplayName'] = i.displayName),
          (s['sessionId'] = o),
          ro(e, n, t.type, void 0, null !== (r = t.eventId) && void 0 !== r ? r : void 0, s)
        );
      }
      async function To(e) {
        const { BuildInfo: t } = Io(),
          n = {};
        Se() ? (n.iosBundleId = t.packageName) : _e() ? (n.androidPackageName = t.packageName) : w(e, 'operation-not-supported-in-this-environment'),
          await ki(e, n);
      }
      function Ao(e) {
        const { cordova: t } = Io();
        return new Promise(n => {
          t.plugins.browsertab.isAvailable(r => {
            let i = null;
            r ? t.plugins.browsertab.openUrl(e) : (i = t.InAppBrowser.open(e, Te() ? '_blank' : '_system', 'location=yes')), n(i);
          });
        });
      }
      async function xo(e, t, n) {
        const { cordova: r } = Io();
        let i = () => {};
        try {
          await new Promise((o, s) => {
            let a = null;
            function u() {
              var e;
              o();
              const t = null === (e = r.plugins.browsertab) || void 0 === e ? void 0 : e.close;
              'function' === typeof t && t(), 'function' === typeof (null === n || void 0 === n ? void 0 : n.close) && n.close();
            }
            function c() {
              a ||
                (a = window.setTimeout(() => {
                  s(b(e, 'redirect-cancelled-by-user'));
                }, Eo));
            }
            function l() {
              'visible' === (null === document || void 0 === document ? void 0 : document.visibilityState) && c();
            }
            t.addPassiveListener(u),
              document.addEventListener('resume', c, !1),
              _e() && document.addEventListener('visibilitychange', l, !1),
              (i = () => {
                t.removePassiveListener(u),
                  document.removeEventListener('resume', c, !1),
                  document.removeEventListener('visibilitychange', l, !1),
                  a && window.clearTimeout(a);
              });
          });
        } finally {
          i();
        }
      }
      function Co(e) {
        var t, n, r, i, o, s, a, u, c, l;
        const h = Io();
        S(
          'function' === typeof (null === (t = null === h || void 0 === h ? void 0 : h.universalLinks) || void 0 === t ? void 0 : t.subscribe),
          e,
          'invalid-cordova-configuration',
          { missingPlugin: 'cordova-universal-links-plugin-fix' }
        ),
          S(
            'undefined' !== typeof (null === (n = null === h || void 0 === h ? void 0 : h.BuildInfo) || void 0 === n ? void 0 : n.packageName),
            e,
            'invalid-cordova-configuration',
            { missingPlugin: 'cordova-plugin-buildInfo' }
          ),
          S(
            'function' ===
              typeof (null ===
                (o =
                  null === (i = null === (r = null === h || void 0 === h ? void 0 : h.cordova) || void 0 === r ? void 0 : r.plugins) || void 0 === i
                    ? void 0
                    : i.browsertab) || void 0 === o
                ? void 0
                : o.openUrl),
            e,
            'invalid-cordova-configuration',
            { missingPlugin: 'cordova-plugin-browsertab' }
          ),
          S(
            'function' ===
              typeof (null ===
                (u =
                  null === (a = null === (s = null === h || void 0 === h ? void 0 : h.cordova) || void 0 === s ? void 0 : s.plugins) || void 0 === a
                    ? void 0
                    : a.browsertab) || void 0 === u
                ? void 0
                : u.isAvailable),
            e,
            'invalid-cordova-configuration',
            { missingPlugin: 'cordova-plugin-browsertab' }
          ),
          S(
            'function' ===
              typeof (null === (l = null === (c = null === h || void 0 === h ? void 0 : h.cordova) || void 0 === c ? void 0 : c.InAppBrowser) ||
              void 0 === l
                ? void 0
                : l.open),
            e,
            'invalid-cordova-configuration',
            { missingPlugin: 'cordova-plugin-inappbrowser' }
          );
      }
      async function ko(e) {
        const t = Oo(e),
          n = await crypto.subtle.digest('SHA-256', t),
          r = Array.from(new Uint8Array(n));
        return r.map(e => e.toString(16).padStart(2, '0')).join('');
      }
      function Oo(e) {
        if ((A(/[0-9a-zA-Z]+/.test(e), 'Can only convert alpha-numeric strings'), 'undefined' !== typeof TextEncoder))
          return new TextEncoder().encode(e);
        const t = new ArrayBuffer(e.length),
          n = new Uint8Array(t);
        for (let r = 0; r < e.length; r++) n[r] = e.charCodeAt(r);
        return n;
      }
      /**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */ const No = 20;
      class Ro extends Ti {
        constructor() {
          super(...arguments),
            (this.passiveListeners = new Set()),
            (this.initPromise = new Promise(e => {
              this.resolveInialized = e;
            }));
        }
        addPassiveListener(e) {
          this.passiveListeners.add(e);
        }
        removePassiveListener(e) {
          this.passiveListeners.delete(e);
        }
        resetRedirect() {
          (this.queuedRedirectEvent = null), (this.hasHandledPotentialRedirect = !1);
        }
        onEvent(e) {
          return this.resolveInialized(), this.passiveListeners.forEach(t => t(e)), super.onEvent(e);
        }
        async initialized() {
          await this.initPromise;
        }
      }
      function Po(e, t, n = null) {
        return { type: t, eventId: n, urlResponse: null, sessionId: Mo(), postBody: null, tenantId: e.tenantId, error: b(e, 'no-auth-event') };
      }
      function Do(e, t) {
        return Fo()._set(Uo(e), t);
      }
      async function Lo(e) {
        const t = await Fo()._get(Uo(e));
        return t && (await Fo()._remove(Uo(e))), t;
      }
      function jo(e, t) {
        var n, r;
        const i = Bo(t);
        if (i.includes('/__/auth/callback')) {
          const t = $o(i),
            o = t['firebaseError'] ? Vo(decodeURIComponent(t['firebaseError'])) : null,
            s =
              null === (r = null === (n = null === o || void 0 === o ? void 0 : o['code']) || void 0 === n ? void 0 : n.split('auth/')) ||
              void 0 === r
                ? void 0
                : r[1],
            a = s ? b(s) : null;
          return a
            ? { type: e.type, eventId: e.eventId, tenantId: e.tenantId, error: a, urlResponse: null, sessionId: null, postBody: null }
            : { type: e.type, eventId: e.eventId, tenantId: e.tenantId, sessionId: e.sessionId, urlResponse: i, postBody: null };
        }
        return null;
      }
      function Mo() {
        const e = [],
          t = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
        for (let n = 0; n < No; n++) {
          const n = Math.floor(Math.random() * t.length);
          e.push(t.charAt(n));
        }
        return e.join('');
      }
      function Fo() {
        return he(Qn);
      }
      function Uo(e) {
        return pe('authEvent', e.config.apiKey, e.name);
      }
      function Vo(e) {
        try {
          return JSON.parse(e);
        } catch (t) {
          return null;
        }
      }
      function Bo(e) {
        const t = $o(e),
          n = t['link'] ? decodeURIComponent(t['link']) : void 0,
          r = $o(n)['link'],
          i = t['deep_link_id'] ? decodeURIComponent(t['deep_link_id']) : void 0,
          o = $o(i)['link'];
        return o || i || r || n || e;
      }
      function $o(e) {
        if (!(null === e || void 0 === e ? void 0 : e.includes('?'))) return {};
        const [t, ...n] = e.split('?');
        return (0, i.zd)(n.join('?'));
      }
      /**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */ const qo = 500;
      class zo {
        constructor() {
          (this._redirectPersistence = Xn),
            (this._shouldInitProactively = !0),
            (this.eventManagers = new Map()),
            (this.originValidationPromises = {}),
            (this._completeRedirectFn = Ii),
            (this._overrideRedirectResult = fi);
        }
        async _initialize(e) {
          const t = e._key();
          let n = this.eventManagers.get(t);
          return n || ((n = new Ro(e)), this.eventManagers.set(t, n), this.attachCallbackListeners(e, n)), n;
        }
        _openPopup(e) {
          w(e, 'operation-not-supported-in-this-environment');
        }
        async _openRedirect(e, t, n, r) {
          Co(e);
          const i = await this._initialize(e);
          await i.initialized(), i.resetRedirect(), hi(), await this._originValidation(e);
          const o = Po(e, n, r);
          await Do(e, o);
          const s = await So(e, o, t),
            a = await Ao(s);
          return xo(e, i, a);
        }
        _isIframeWebStorageSupported(e, t) {
          throw new Error('Method not implemented.');
        }
        _originValidation(e) {
          const t = e._key();
          return this.originValidationPromises[t] || (this.originValidationPromises[t] = To(e)), this.originValidationPromises[t];
        }
        attachCallbackListeners(e, t) {
          const { universalLinks: n, handleOpenURL: r, BuildInfo: i } = Io(),
            o = setTimeout(async () => {
              await Lo(e), t.onEvent(Wo());
            }, qo),
            s = async n => {
              clearTimeout(o);
              const r = await Lo(e);
              let i = null;
              r && (null === n || void 0 === n ? void 0 : n['url']) && (i = jo(r, n['url'])), t.onEvent(i || Wo());
            };
          'undefined' !== typeof n && 'function' === typeof n.subscribe && n.subscribe(null, s);
          const a = r,
            u = `${i.packageName.toLowerCase()}://`;
          Io().handleOpenURL = async e => {
            if ((e.toLowerCase().startsWith(u) && s({ url: e }), 'function' === typeof a))
              try {
                a(e);
              } catch (t) {
                console.error(t);
              }
          };
        }
      }
      const Go = zo;
      function Wo() {
        return { type: 'unknown', eventId: null, sessionId: null, urlResponse: null, postBody: null, tenantId: null, error: b('no-auth-event') };
      }
      /**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */ function Ho(e, t) {
        We(e)._logFramework(t);
      }
      var Ko = '@firebase/auth-compat',
        Qo = '0.4.2';
      /**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
      const Yo = 1e3;
      function Xo() {
